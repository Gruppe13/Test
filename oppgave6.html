<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

    <title>Building Blocks</title>

    <!------ JAVASCRIPT ------>
    <script type="text/javascript">

        ///////////////////////////////////////////////////////////
        /////////                   VERDIER
        ///////////////////////////////////////////////////////////
        var amount = 1;
        var size = 100;
        var distance = 0;

        ///////////////////////////////////////////////////////////
        /////////                   KLASSER OG EXTEND FUNKSJONER
        ///////////////////////////////////////////////////////////
        Object.extend = function (a, b) {

            for (var att in b) {

                a.prototype[att] = b[att];
            }
            return a;

        }

        var Class = function (proto) {

            var the_class = function() {

                if (this.init) {

                    this.init.apply(this, arguments);

                }

                return this;
            }

            Object.extend(the_class, proto);

            return the_class;
        }

        ///////////////////////////////////////////////////////////
        /////////                   BOX KLASSEN
        ///////////////////////////////////////////////////////////

        var Box = Class({

            init: function (x, y, z) {

                this.x = x;
                this.y = y;
                this.z = z;

            }
            ,
            create: function () {

                this.faces = new Array();
                this.element = createElement('div', 'box');

                this.position(
                'translateX(' + ((-size * (amount / 2)) + (this.x * size) + (this.x * distance)) + 'px)' +
                'translateY(' + ((-size * (amount / 2)) + (this.y * size) + (this.y * distance)) + 'px)' +
                'translateZ(' + ((-size * (amount / 2)) + (this.z * size) + (this.z * distance)) + 'px)');

                for (var i = 0; i < 6; i++) {

                    this.faces.push(new Face(this));
                    this.faces[i].create();
                    this.element.appendChild(this.faces[i].element);
                }

                this.faces[0].transform('translateZ(' + (size / 2) + 'px)', 'center');
                this.faces[1].transform('translateZ(-' + (size / 2) + 'px) rotateY(180deg)', 'center');
                this.faces[2].transform('rotateY(90deg) translateX(' + (size / 2) + 'px)', 'top right');
                this.faces[3].transform('rotateY(270deg) translateX(-' + (size / 2) + 'px)', 'center left');
                this.faces[4].transform('rotateX(90deg) translateY(-' + (size / 2) + 'px)', 'top center');
                this.faces[5].transform('rotateX(-90deg) translateY(' + (size / 2) + 'px)', 'bottom center');

                return this.element;
            }
            ,
            position: function (translate) {

                this.element.style['-webkit-transform'] = translate;
            }
            ,
            destroy: function() {

                this.element.parentNode.removeChild(this.element);
            }

        });

        ///////////////////////////////////////////////////////////
        /////////                   FACE KLASSEN
        ///////////////////////////////////////////////////////////
        var Face = Class({

            init: function (box) {

                this.box = box;
            }
            ,
            create: function (face) {

                this.element = createElement('div', 'face');
                this.element.style.width = size + 'px';
                this.element.style.height = size + 'px';;
            }
            ,
            transform: function (transform, origin) {

                this.element.style['-webkit-transform'] = transform;
                this.element.style['-webkit-transform-origin'] = origin;
            }

        });

        ///////////////////////////////////////////////////////////
        /////////                   LEGGE TIL BOX FUNKSJONEN
        ///////////////////////////////////////////////////////////
        var boxes = new Array();

        function addBoxes() {

            for (var i = 0; i < boxes.length; i++) {

                boxes[i].destroy();
            }

            boxes = [];

            amount = document.getElementById('amount').value;
            size = document.getElementById('size').value;
            distance = document.getElementById('distance').value;

            for (var y = 0; y < amount; y++) {
                for (var x = 0; x < amount; x++) {
                    for (var z = 0; z < amount; z++) {

                        if (y == 0 || x == 0 || z == 0 ||
                            y == amount - 1 || x == amount - 1 || z == amount - 1) {

                            boxes[boxes.length] = new Box(x, y, z);
                            boxes[boxes.length - 1].create();
                            byID('container').appendChild(boxes[boxes.length - 1].element);

                        }
                    }
                }
            }
        }

        ///////////////////////////////////////////////////////////
        /////////                   UTIL
        ///////////////////////////////////////////////////////////
        var createElement = function (tag, className) {

            var element = document.createElement(tag);
            element.className = className;

            return element;
        }

        var byID = function (id) {

            return document.getElementById(id);
        }

    </script>

    <!-- CSS STYLE -->
    <style type="text/css">

        #view_port {

            width: 0px;
            height: 0px;

            -webkit-perspective: 800px;
            -webkit-transform-style: preserve-3d;
            -webkit-perspective-origin: 20% 100px;

            margin: 250px auto;
        }

        #container, .box {

            position: relative;

            -webkit-transform-style: preserve-3d;

        }

        #container {

            -webkit-animation: rotateX 8s infinite linear;
        }


        @-webkit-keyframes rotateX {

            0% {

                -webkit-transform: rotateY(0deg);
            }

            100% {

                -webkit-transform: rotateY(360deg);
            }
        }

        .face {

            position: absolute;

            box-sizing: border-box;

            border: 1px solid grey;

            background-color: rgba(0, 148, 255, 0.4);
        }

        .face:hover {

            background-color: rgba(22, 69, 149, 0.7);
        }

        ul {

            list-style: none;

            margin: 0px;
            padding: 0px;
        }

    </style>

</head>

<body>

    <ul>

        <li>
            <input id="amount" value="Antall(3x3x3): 3-def" onfocus="this.value=''" />
            
        </li>

        <li>
            <input id="size" value="Størrelse: 50-def" onfocus="this.value=''" />
        </li>

        <li>
            <input id="distance" value="Avstand: 10-def" onfocus="this.value=''" />
        </li>

        <li>
            <button id="add" onclick="addBoxes();">Build</button>
        </li>
        
    </ul>

    <div id="view_port">
        <div id="container"></div>
    </div>

</body>

</html>